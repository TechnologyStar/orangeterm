# OrangeTerm 用户指南

## 📚 目录

- [简介](#简介)
- [快速开始](#快速开始)
- [主要功能](#主要功能)
- [服务器管理](#服务器管理)
- [AI 对话功能](#ai-对话功能)
- [MCP 工具](#mcp-工具)
- [授权模式](#授权模式)
- [安全特性](#安全特性)
- [常见问题](#常见问题)

---

## 简介

**OrangeTerm** 是一款现代化的 AI 驱动的运维助手桌面应用程序。它结合了智能命令执行、服务器管理和 AI 辅助功能，为运维工程师和系统管理员提供了一个强大的工作平台。

### 核心特性

- 🤖 **AI 智能助手**：与 AI 对话，获取命令建议和操作指导
- 🔒 **虚拟凭证映射**：保护敏感信息，防止凭证泄露
- 🖥️ **多服务器管理**：统一管理多台远程服务器
- 🌐 **联网搜索**：内置必应搜索功能，AI 可以联网查询信息
- ⚡ **实时监控**：实时显示服务器延迟和连接状态
- 🎨 **现代化 UI**：暗色主题配合橙色渐变，视觉体验极佳
- 🌍 **双语支持**：完整的中英文界面切换

---

## 快速开始

### 安装

#### Linux
```bash
# 下载 AppImage 文件
chmod +x OrangeTerm-*.AppImage
./OrangeTerm-*.AppImage
```

#### Windows
```bash
# 下载并运行 .exe 安装程序
OrangeTerm-Setup-*.exe
```

#### macOS
```bash
# 下载 .dmg 文件
open OrangeTerm-*.dmg
# 拖拽到 Applications 文件夹
```

### 首次启动

1. **启动应用程序**：双击桌面图标或从应用程序列表中启动
2. **选择语言**：点击右上角的地球图标，选择中文或英文
3. **添加服务器**：切换到"服务器管理"标签页，添加你的第一台服务器

---

## 主要功能

### 1. 对话界面

对话界面是 OrangeTerm 的核心功能区域，在这里你可以：

- 💬 **与 AI 对话**：直接输入问题，AI 会给出专业的运维建议
- ⌨️ **执行命令**：输入 Linux 命令，系统会自动执行并显示结果
- 🔍 **查看历史**：所有对话和命令执行历史都会保存在聊天记录中
- 💡 **查看思考过程**：AI 模型的思考过程会用特殊样式展示（可折叠查看）

#### 消息类型

1. **用户消息**：显示为蓝色气泡
2. **AI 回复**：显示为灰色气泡
3. **系统消息**：显示为带蓝色边框的气泡
4. **思考过程**：橙色折叠面板，显示 AI 的推理过程

#### AI 思考过程

当 AI 模型返回包含 `<think>...</think>` 或 `<\think>...</think>` 标签的内容时，这部分内容会被识别为思考过程，并以特殊的橙色折叠面板展示。用户可以点击展开查看 AI 的详细推理步骤。

**示例**：
```
<think>
用户询问如何查看系统内存使用情况。
我应该推荐使用 free 命令，它是最常用的内存查看工具。
还可以提供 -h 参数让输出更易读。
</think>

建议使用 `free -h` 命令查看系统内存使用情况。
```

### 2. 提示符显示

当连接到远程服务器时，系统会自动获取并显示该服务器的 shell 提示符（PS1）。提示符会以绿色边框的卡片形式显示在消息下方，让你清楚知道当前的工作环境。

**示例**：
```
提示符: root@webserver:/var/www#
```

---

## 服务器管理

### 添加服务器

1. 点击"服务器管理"标签页
2. 点击"添加服务器"按钮
3. 填写服务器信息：
   - **服务器名称**：给服务器起个易记的名字（如："生产环境 Web 服务器"）
   - **主机地址**：IP 地址或域名
   - **端口**：SSH 端口（默认 22）
   - **用户名**：SSH 登录用户名
   - **密码**：SSH 登录密码

4. 点击"测试连接"验证配置
5. 点击"保存"

### 连接到服务器

- 在服务器列表中找到目标服务器
- 点击"连接"按钮
- 连接成功后，服务器卡片会显示为绿色边框
- 状态栏会显示当前连接的服务器名称

### 自动检测系统信息

连接成功后，系统会自动检测并显示：

- 🖥️ **CPU 信息**：CPU 型号和核心数
- 💾 **内存信息**：总内存、已用内存、可用内存、使用率
- 💿 **磁盘信息**：总容量、已用空间、可用空间、使用率
- 🐧 **操作系统**：OS 发行版和内核版本
- ⏱️ **运行时间**：系统已运行时长
- 🏷️ **主机名**：服务器的主机名

### 服务器状态监控

#### 连接状态

- 🟢 **已连接**：服务器正常连接
- 🔴 **未连接**：服务器未连接
- ⚠️ **错误**：连接出现问题

#### 实时延迟监控

当服务器连接后，状态栏会显示实时网络延迟：

- 🟢 **< 50ms**：延迟低，网络状况极佳
- 🟡 **50-150ms**：延迟中等，网络状况良好
- 🔴 **> 150ms**：延迟高，网络可能存在问题

延迟数据每 5 秒自动刷新一次。

### 服务器操作

- **编辑**：修改服务器配置
- **删除**：删除服务器（需要确认）
- **断开连接**：断开当前连接
- **重新检测**：刷新系统信息

---

## AI 对话功能

### 与 AI 交互

在对话输入框中输入你的问题或需求，AI 会根据上下文给出专业的回答和建议。

#### 对话示例

**用户**：
```
如何查看 Nginx 的错误日志？
```

**AI**：
```
<think>
用户想要查看 Nginx 错误日志。
Nginx 的默认错误日志位置是 /var/log/nginx/error.log
可以使用 tail 命令查看最新的日志内容
</think>

你可以使用以下命令查看 Nginx 错误日志：

tail -f /var/log/nginx/error.log

这个命令会实时显示最新的错误日志。如果只想查看最后 100 行：

tail -n 100 /var/log/nginx/error.log
```

### 命令执行

当 AI 建议执行命令时，你可以：

1. 直接输入命令
2. AI 会分析命令的风险级别
3. 根据当前的授权模式，可能需要你手动确认
4. 命令执行后会显示输出结果

#### 命令执行结果

- ✅ **成功**：绿色标签，显示命令输出
- ❌ **失败**：红色标签，显示错误信息

---

## MCP 工具

### 联网搜索功能

OrangeTerm 内置了基于必应（Bing）的联网搜索功能，AI 可以通过搜索获取最新的技术信息。

#### 启用联网搜索

1. 在状态栏找到"联网搜索"开关
2. 点击切换开关启用或禁用
3. 启用后图标会变为绿色

#### 搜索状态指示

- 🟢 **已启用**：AI 可以进行联网搜索
- ⚫ **已禁用**：AI 只使用本地知识库

#### 使用场景

当你询问 AI 关于最新技术、工具版本或在线资源时，AI 会自动使用必应搜索获取最新信息。

**示例**：
```
用户：最新版本的 Docker 有哪些新特性？

AI：让我为你搜索最新的 Docker 信息...
[自动调用必应搜索]
```

### MCP 协议支持

OrangeTerm 支持 Model Context Protocol (MCP)，可以集成外部工具和服务。

---

## 授权模式

OrangeTerm 提供三种命令执行授权模式，平衡安全性和便利性。

### 1. 全部手动 (Manual All)

- 🔒 **最安全**
- 所有命令执行前都需要手动确认
- 适合生产环境和关键服务器

### 2. 高风险手动 (High Risk Only)

- ⚖️ **平衡**（推荐）
- 只有高风险命令需要确认
- 普通命令自动执行
- 适合日常运维工作

**高风险命令包括**：
- `rm`、`rmdir`：删除文件和目录
- `mkfs`、`fdisk`：磁盘格式化和分区
- `shutdown`、`reboot`：系统重启和关机
- `kill`、`pkill`：进程管理
- `chmod 777`：危险的权限修改
- 使用管道和重定向到系统文件

### 3. 全自动 (Automatic)

- ⚡ **最便捷**
- 所有命令自动执行，无需确认
- 适合开发环境和测试服务器
- ⚠️ 注意：请在信任的环境中使用

### 切换授权模式

在主界面顶部的授权模式选择器中，点击选择你想要的模式。当前模式会以橙色高亮显示。

---

## 安全特性

### 虚拟凭证映射

OrangeTerm 使用虚拟凭证系统保护你的敏感信息：

- 真实 IP 和密码被映射为虚拟值
- AI 和日志中只显示虚拟凭证
- 命令执行时自动转换为真实凭证
- 防止凭证泄露到对话历史中

**示例**：
```
虚拟 IP：192.168.100.1
虚拟密码：virtual_pass_123

真实 IP：203.0.113.45
真实密码：MySecretPass@2024
```

### 命令风险分析

系统内置智能命令风险分析器：

- 自动识别高风险命令
- 分析命令的潜在危险
- 给出风险提示和建议
- 在执行前提供确认机会

### 连接加密

所有服务器连接使用 SSH 协议加密，确保：

- 数据传输安全
- 密码加密存储
- 防止中间人攻击

---

## 常见问题

### 连接问题

**Q: 无法连接到服务器**

A: 请检查：
1. 服务器 IP 地址是否正确
2. SSH 端口是否开放（默认 22）
3. 用户名和密码是否正确
4. 服务器防火墙设置
5. 本地网络连接

**Q: 连接后立即断开**

A: 可能原因：
1. SSH 服务配置问题
2. 密钥认证冲突
3. 服务器资源不足

### 性能问题

**Q: 延迟很高怎么办？**

A: 建议：
1. 检查网络连接质量
2. 使用就近的服务器
3. 避免跨国连接
4. 联系网络管理员

**Q: UI 响应慢**

A: 尝试：
1. 关闭不用的标签页
2. 清理聊天历史
3. 重启应用程序
4. 检查系统资源使用

### 功能问题

**Q: AI 没有回复**

A: 可能原因：
1. MCP 服务未配置
2. 网络连接问题
3. 查看控制台错误日志

**Q: 联网搜索不工作**

A: 检查：
1. 联网搜索开关是否已启用
2. 网络是否可以访问必应
3. 防火墙或代理设置

**Q: 命令执行失败**

A: 排查：
1. 检查命令语法是否正确
2. 确认有足够的权限
3. 查看错误信息
4. 尝试在终端手动执行

### 安全问题

**Q: 密码如何保存？**

A: OrangeTerm 使用虚拟凭证系统：
- 真实密码被映射为虚拟值
- 存储在本地加密数据库
- 不会出现在日志或对话中

**Q: 可以使用 SSH 密钥吗？**

A: 当前版本使用密码认证，SSH 密钥认证功能正在开发中。

### 更新和支持

**Q: 如何更新到最新版本？**

A: 
1. 访问项目 GitHub 页面
2. 下载最新版本
3. 覆盖安装或重新安装

**Q: 在哪里报告 Bug？**

A: 请在 GitHub Issues 页面提交：
- 详细描述问题
- 提供错误日志
- 说明复现步骤

---

## 键盘快捷键

- `Enter`：发送消息
- `Shift + Enter`：换行
- `Ctrl/Cmd + ,`：打开设置（计划中）
- `Ctrl/Cmd + K`：清空聊天（计划中）
- `Ctrl/Cmd + N`：新建连接（计划中）

---

## 最佳实践

### 服务器管理

1. 使用有意义的服务器名称
2. 定期更新服务器密码
3. 为不同环境使用不同的授权模式
4. 定期检查服务器状态和性能

### 命令执行

1. 在生产环境使用"高风险手动"模式
2. 执行重要命令前先备份
3. 仔细阅读 AI 的建议和警告
4. 不确定的命令先在测试环境执行

### AI 对话

1. 提供清晰、具体的问题描述
2. 包含相关的上下文信息
3. 善用联网搜索获取最新信息
4. 查看 AI 的思考过程理解其推理

### 安全建议

1. 不要在不安全的网络环境下使用
2. 定期更新应用程序
3. 使用强密码
4. 限制服务器访问权限
5. 定期审计操作日志

---

## 技术支持

如需帮助，请通过以下方式联系：

- 📧 Email: support@orangeterm.com
- 💬 GitHub Issues: https://github.com/yourusername/orangeterm/issues
- 📖 文档: https://docs.orangeterm.com

---

**OrangeTerm** - 让运维更智能，让工作更高效！ 🍊✨
